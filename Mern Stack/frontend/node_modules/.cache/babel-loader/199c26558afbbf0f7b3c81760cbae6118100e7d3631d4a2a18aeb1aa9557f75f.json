{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import'./PasswordReset.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PasswordReset=function PasswordReset(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var setVal=function setVal(e){setEmail(e.target.value);};var sendLink=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(email===\"\")){_context.next=5;break;}toast.error(\"email is required!\",{position:\"top-center\"});_context.next=16;break;case 5:if(email.endsWith('@vanderbilt.edu')){_context.next=9;break;}toast.error('Email must be a valid Vanderbilt email address',{position:\"top-center\"});_context.next=16;break;case 9:_context.next=11;return fetch(\"/api/user/sendpasswordlink\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email})});case 11:res=_context.sent;_context.next=14;return res.json();case 14:data=_context.sent;if(data.status===201){setEmail(\"\");setMessage(true);}else{toast.error(\"Invalid User\",{position:\"top-center\"});}case 16:case\"end\":return _context.stop();}},_callee);}));return function sendLink(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"form_data\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form_heading\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Enter Your Email\"})}),message?/*#__PURE__*/_jsx(\"p\",{style:{color:\"green\",fontWeight:\"bold\"},children:\"Password reset link sent successfully to your email\"}):\"\",/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form_input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:setVal,name:\"email\",id:\"email\",placeholder:\"Enter Your Email Address\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:sendLink,children:\"Send\"})]}),/*#__PURE__*/_jsx(ToastContainer,{})]})})});};export default PasswordReset;","map":{"version":3,"names":["React","useState","ToastContainer","toast","PasswordReset","email","setEmail","message","setMessage","setVal","e","target","value","sendLink","preventDefault","error","position","endsWith","fetch","method","headers","body","JSON","stringify","res","json","data","status","color","fontWeight"],"sources":["/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/src/components/PasswordReset.js"],"sourcesContent":["import React, { useState } from 'react'\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './PasswordReset.css'\n\nconst PasswordReset = () => {\n\n    const [email, setEmail] = useState(\"\");\n\n    const [message, setMessage] = useState(\"\");\n\n    const setVal = (e) => {\n        setEmail(e.target.value)\n    }\n\n    const sendLink = async (e) => {\n        e.preventDefault();\n    \n        if (email === \"\") {\n            toast.error(\"email is required!\", {\n                position: \"top-center\"\n            });\n        } else if (!email.endsWith('@vanderbilt.edu')) {\n            toast.error('Email must be a valid Vanderbilt email address', {\n              position: \"top-center\",\n            });\n          } else {\n            const res = await fetch(\"/api/user/sendpasswordlink\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({ email })\n            });\n\n            const data = await res.json();\n\n            if (data.status === 201) {\n                setEmail(\"\");\n                setMessage(true)\n            } else {\n                toast.error(\"Invalid User\",{\n                    position: \"top-center\"\n                })\n            }\n        }\n    }\n\n    return (\n        <>\n            <section>\n                <div className=\"form_data\">\n                    <div className=\"form_heading\">\n                        <h1>Enter Your Email</h1>\n                    </div>\n\n                    {message ? <p style={{ color: \"green\", fontWeight: \"bold\" }}>Password reset link sent successfully to your email</p> : \"\"}\n                    <form>\n                        <div className=\"form_input\">\n                            <label htmlFor=\"email\">Email</label>\n                            <input type=\"email\" value={email} onChange={setVal} name=\"email\" id=\"email\" placeholder='Enter Your Email Address' />\n                        </div>\n\n                        <button className='btn' onClick={sendLink}>Send</button>\n                    </form>\n                    <ToastContainer />\n                </div>\n            </section>\n        </>\n    )\n}\n\nexport default PasswordReset"],"mappings":"ycAAA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,cAAc,CAAEC,KAAK,KAAQ,gBAAgB,CACtD,MAAO,uCAAuC,CAC9C,MAAO,qBAAqB,8IAE5B,GAAMC,cAAa,CAAG,QAAhBA,cAAa,EAAS,CAExB,cAA0BH,QAAQ,CAAC,EAAE,CAAC,wCAA/BI,KAAK,eAAEC,QAAQ,eAEtB,eAA8BL,QAAQ,CAAC,EAAE,CAAC,yCAAnCM,OAAO,eAAEC,UAAU,eAE1B,GAAMC,OAAM,CAAG,QAATA,OAAM,CAAIC,CAAC,CAAK,CAClBJ,QAAQ,CAACI,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC5B,CAAC,CAED,GAAMC,SAAQ,4FAAG,iBAAOH,CAAC,gIACrBA,CAAC,CAACI,cAAc,EAAE,CAAC,KAEfT,KAAK,GAAK,EAAE,0BACZF,KAAK,CAACY,KAAK,CAAC,oBAAoB,CAAE,CAC9BC,QAAQ,CAAE,YACd,CAAC,CAAC,CAAC,iCACKX,KAAK,CAACY,QAAQ,CAAC,iBAAiB,CAAC,yBACzCd,KAAK,CAACY,KAAK,CAAC,gDAAgD,CAAE,CAC5DC,QAAQ,CAAE,YACZ,CAAC,CAAC,CAAC,qDAEeE,MAAK,CAAC,4BAA4B,CAAE,CAClDC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAElB,KAAK,CAALA,KAAM,CAAC,CAClC,CAAC,CAAC,SANImB,GAAG,sCAQUA,IAAG,CAACC,IAAI,EAAE,SAAvBC,IAAI,eAEV,GAAIA,IAAI,CAACC,MAAM,GAAK,GAAG,CAAE,CACrBrB,QAAQ,CAAC,EAAE,CAAC,CACZE,UAAU,CAAC,IAAI,CAAC,CACpB,CAAC,IAAM,CACHL,KAAK,CAACY,KAAK,CAAC,cAAc,CAAC,CACvBC,QAAQ,CAAE,YACd,CAAC,CAAC,CACN,CAAC,sDAER,kBA/BKH,SAAQ,4CA+Bb,CAED,mBACI,sCACI,sCACI,aAAK,SAAS,CAAC,WAAW,wBACtB,YAAK,SAAS,CAAC,cAAc,uBACzB,oBAAI,kBAAgB,EAAK,EACvB,CAELN,OAAO,cAAG,UAAG,KAAK,CAAE,CAAEqB,KAAK,CAAE,OAAO,CAAEC,UAAU,CAAE,MAAO,CAAE,UAAC,qDAAmD,EAAI,CAAG,EAAE,cACzH,qCACI,aAAK,SAAS,CAAC,YAAY,wBACvB,cAAO,OAAO,CAAC,OAAO,UAAC,OAAK,EAAQ,cACpC,cAAO,IAAI,CAAC,OAAO,CAAC,KAAK,CAAExB,KAAM,CAAC,QAAQ,CAAEI,MAAO,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,WAAW,CAAC,0BAA0B,EAAG,GACnH,cAEN,eAAQ,SAAS,CAAC,KAAK,CAAC,OAAO,CAAEI,QAAS,UAAC,MAAI,EAAS,GACrD,cACP,KAAC,cAAc,IAAG,GAChB,EACA,EACX,CAEX,CAAC,CAED,cAAeT,cAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}