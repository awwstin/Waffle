{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{useAuthContext}from'./useAuthContext';export var useSignup=function useSignup(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useAuthContext=useAuthContext(),dispatch=_useAuthContext.dispatch;var signup=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email,password){var response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);setError(null);_context.next=4;return fetch('/api/user/signup',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,password:password})});case 4:response=_context.sent;_context.next=7;return response.json();case 7:json=_context.sent;if(!response.ok){setIsLoading(false);setError(json.error);}if(response.ok){// save the user to local storage\nlocalStorage.setItem('user',JSON.stringify(json));alert('An email has been sent to your email address with instructions on how to verify your email address.');// update the auth context\n//dispatch({type: 'LOGIN', payload: json})\n// update loading state\nsetIsLoading(false);}case 10:case\"end\":return _context.stop();}},_callee);}));return function signup(_x,_x2){return _ref.apply(this,arguments);};}();return{signup:signup,isLoading:isLoading,error:error};};","map":{"version":3,"names":["useState","useAuthContext","useSignup","error","setError","isLoading","setIsLoading","dispatch","signup","email","password","fetch","method","headers","body","JSON","stringify","response","json","ok","localStorage","setItem","alert"],"sources":["/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/src/hooks/useSignup.js"],"sourcesContent":["import { useState } from 'react'\nimport { useAuthContext } from './useAuthContext'\n\nexport const useSignup = () => {\n  const [error, setError] = useState(null)\n  const [isLoading, setIsLoading] = useState(null)\n  const { dispatch } = useAuthContext()\n\n  const signup = async (email, password) => {\n    setIsLoading(true)\n    setError(null)\n\n    const response = await fetch('/api/user/signup', {\n      method: 'POST',\n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify({ email, password })\n    })\n    const json = await response.json()\n\n    if (!response.ok) {\n      setIsLoading(false)\n      setError(json.error)\n    }\n    if (response.ok) {\n      // save the user to local storage\n      localStorage.setItem('user', JSON.stringify(json))\n      alert('An email has been sent to your email address with instructions on how to verify your email address.')\n\n      // update the auth context\n      //dispatch({type: 'LOGIN', payload: json})\n\n      // update loading state\n      setIsLoading(false)\n    }\n  }\n\n  return { signup, isLoading, error }\n}"],"mappings":"ycAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,cAAc,KAAQ,kBAAkB,CAEjD,MAAO,IAAMC,UAAS,CAAG,QAAZA,UAAS,EAAS,CAC7B,cAA0BF,QAAQ,CAAC,IAAI,CAAC,wCAAjCG,KAAK,eAAEC,QAAQ,eACtB,eAAkCJ,QAAQ,CAAC,IAAI,CAAC,yCAAzCK,SAAS,eAAEC,YAAY,eAC9B,oBAAqBL,cAAc,EAAE,CAA7BM,QAAQ,iBAARA,QAAQ,CAEhB,GAAMC,OAAM,4FAAG,iBAAOC,KAAK,CAAEC,QAAQ,qIACnCJ,YAAY,CAAC,IAAI,CAAC,CAClBF,QAAQ,CAAC,IAAI,CAAC,uBAESO,MAAK,CAAC,kBAAkB,CAAE,CAC/CC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAC,cAAc,CAAE,kBAAkB,CAAC,CAC7CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEP,KAAK,CAALA,KAAK,CAAEC,QAAQ,CAARA,QAAS,CAAC,CAC1C,CAAC,CAAC,QAJIO,QAAQ,qCAKKA,SAAQ,CAACC,IAAI,EAAE,QAA5BA,IAAI,eAEV,GAAI,CAACD,QAAQ,CAACE,EAAE,CAAE,CAChBb,YAAY,CAAC,KAAK,CAAC,CACnBF,QAAQ,CAACc,IAAI,CAACf,KAAK,CAAC,CACtB,CACA,GAAIc,QAAQ,CAACE,EAAE,CAAE,CACf;AACAC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAEN,IAAI,CAACC,SAAS,CAACE,IAAI,CAAC,CAAC,CAClDI,KAAK,CAAC,qGAAqG,CAAC,CAE5G;AACA;AAEA;AACAhB,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,sDACF,kBA1BKE,OAAM,gDA0BX,CAED,MAAO,CAAEA,MAAM,CAANA,MAAM,CAAEH,SAAS,CAATA,SAAS,CAAEF,KAAK,CAALA,KAAM,CAAC,CACrC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}