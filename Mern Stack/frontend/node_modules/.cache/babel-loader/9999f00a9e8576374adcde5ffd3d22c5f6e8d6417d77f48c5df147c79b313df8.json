{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import'./MyProfile.css';import{useNavigate}from'react-router-dom';import profileImage from'./profile.png';import dog from'./dog.png';import waffle from'./waffle.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=function Profile(){var _profile$roles;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),profile=_useState2[0],setProfile=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var navigate=useNavigate();useEffect(function(){var getProfile=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var token,response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:token=localStorage.getItem('user')?JSON.parse(localStorage.getItem('user')).token:null;if(token){_context.next=5;break;}setIsLoading(false);setError('User is not authenticated');return _context.abrupt(\"return\");case 5:_context.prev=5;_context.next=8;return fetch('/api/user/profile',{headers:{'Authorization':\"Bearer \".concat(token)}});case 8:response=_context.sent;_context.next=11;return response.json();case 11:json=_context.sent;if(!response.ok){setIsLoading(false);setError(json.error);}else{setProfile(json);setIsLoading(false);}_context.next=19;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](5);setIsLoading(false);setError(_context.t0.message);case 19:case\"end\":return _context.stop();}},_callee,null,[[5,15]]);}));return function getProfile(){return _ref.apply(this,arguments);};}();getProfile();},[]);var handleEditProfile=function handleEditProfile(){navigate('/profile');};return/*#__PURE__*/_jsxs(\"div\",{className:\"myprofile-container\",children:[isLoading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}),error&&/*#__PURE__*/_jsx(\"p\",{children:error}),!isLoading&&!error&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"myprofile-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"myprofile-left\",children:[/*#__PURE__*/_jsx(\"img\",{src:profileImage,alt:\"\",className:\"rounded-circle\",width:\"150\",height:\"150\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"myprofile-info\",children:[profile.firstName,\" \",profile.lastName]}),/*#__PURE__*/_jsx(\"p\",{className:\"myprofile-info\",children:(_profile$roles=profile.roles)===null||_profile$roles===void 0?void 0:_profile$roles.join(\", \")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"myprofile-right\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"myprofile-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"myprofile-info-label\",children:\"Full Name:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"myprofile-info-value\",children:[profile.firstName||'',\" \",profile.lastName||'']})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"myprofile-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"myprofile-info-label\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"myprofile-info-value\",children:profile.email})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"myprofile-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"myprofile-info-label\",children:\"Year:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"myprofile-info-value\",children:profile.year?profile.year.charAt(0).toUpperCase()+profile.year.slice(1).toLowerCase():''})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"myprofile-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"myprofile-info-label\",children:\"Languages:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"myprofile-info-value\",children:profile.languages?profile.languages.join(\", \"):''})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"myprofile-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"myprofile-info-label\",children:\"GitHub:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"myprofile-info-value\",children:profile.socialInfo})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"myprofile-edit-button-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"myprofile-edit-button\",onClick:handleEditProfile,children:\"Edit Profile\"})})]})]});};export default Profile;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","profileImage","dog","waffle","Profile","profile","setProfile","isLoading","setIsLoading","error","setError","navigate","getProfile","token","localStorage","getItem","JSON","parse","fetch","headers","response","json","ok","message","handleEditProfile","firstName","lastName","roles","join","email","year","charAt","toUpperCase","slice","toLowerCase","languages","socialInfo"],"sources":["/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/src/pages/MyProfile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport './MyProfile.css'\nimport { useNavigate} from 'react-router-dom'\nimport profileImage from './profile.png'\nimport dog from './dog.png'\nimport waffle from './waffle.png'\n\nconst Profile = () => {\n  const [profile, setProfile] = useState({})\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState(null)\n  const navigate = useNavigate()\n\n  useEffect(() => {\n    const getProfile = async () => {\n      const token = localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')).token : null\n      if (!token) {\n        setIsLoading(false)\n        setError('User is not authenticated')\n        return\n      }\n      try {\n        const response = await fetch('/api/user/profile', {\n          headers: { 'Authorization': `Bearer ${token}` }\n        })\n        const json = await response.json()\n    \n        if (!response.ok) {\n          setIsLoading(false)\n          setError(json.error)\n        } else {\n          setProfile(json)\n          setIsLoading(false)\n        }\n      } catch (e) {\n        setIsLoading(false)\n        setError(e.message)\n      }\n    }    \n    getProfile()\n  }, [])\n\n  const handleEditProfile = () => {\n    navigate('/profile')\n  };\n\n  return (\n    <div className=\"myprofile-container\">\n      {isLoading && <p>Loading...</p>}\n      {error && <p>{error}</p>}\n      {!isLoading && !error && (\n        <div>\n          <div className=\"myprofile-wrapper\">\n            <div className=\"myprofile-left\">\n              <img src={profileImage} alt=\"\" className=\"rounded-circle\" width=\"150\" height=\"150\" />\n              {/* <img src={dog} alt=\"\" className=\"rounded-circle\" width=\"150\" height=\"150\" /> */}\n              {/* <img src={waffle} alt=\"\" className=\"rounded-circle\" width=\"150\" height=\"150\" /> */}\n              <p className=\"myprofile-info\">{profile.firstName} {profile.lastName}</p>\n              <p className=\"myprofile-info\">{profile.roles?.join(\", \")}</p>\n            </div>\n            <div className=\"myprofile-right\">\n              <p className=\"myprofile-info\">\n                <span className=\"myprofile-info-label\">Full Name:</span>\n                <span className=\"myprofile-info-value\">{profile.firstName || ''} {profile.lastName || ''}</span>\n              </p>\n              <p className=\"myprofile-info\">\n                <span className=\"myprofile-info-label\">Email:</span>\n                <span className=\"myprofile-info-value\">{profile.email}</span>\n              </p>\n              <p className=\"myprofile-info\">\n                <span className=\"myprofile-info-label\">Year:</span>\n                <span className=\"myprofile-info-value\">{profile.year ? profile.year.charAt(0).toUpperCase() + profile.year.slice(1).toLowerCase() : ''}</span>\n              </p>\n              <p className=\"myprofile-info\">\n                <span className=\"myprofile-info-label\">Languages:</span>\n                <span className=\"myprofile-info-value\">{profile.languages ? profile.languages.join(\", \") : ''}</span>\n              </p>\n              <p className=\"myprofile-info\">\n                <span className=\"myprofile-info-label\">GitHub:</span>\n                <span className=\"myprofile-info-value\">{profile.socialInfo}</span>\n              </p>\n            </div>\n          </div>\n          <div className=\"myprofile-edit-button-container\">\n            <button className='myprofile-edit-button' onClick={handleEditProfile}>Edit Profile</button>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default Profile\n"],"mappings":"ycAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,iBAAiB,CACxB,OAASC,WAAW,KAAO,kBAAkB,CAC7C,MAAOC,aAAY,KAAM,eAAe,CACxC,MAAOC,IAAG,KAAM,WAAW,CAC3B,MAAOC,OAAM,KAAM,cAAc,yFAEjC,GAAMC,QAAO,CAAG,QAAVA,QAAO,EAAS,oBACpB,cAA8BN,QAAQ,CAAC,CAAC,CAAC,CAAC,wCAAnCO,OAAO,eAAEC,UAAU,eAC1B,eAAkCR,QAAQ,CAAC,IAAI,CAAC,yCAAzCS,SAAS,eAAEC,YAAY,eAC9B,eAA0BV,QAAQ,CAAC,IAAI,CAAC,yCAAjCW,KAAK,eAAEC,QAAQ,eACtB,GAAMC,SAAQ,CAAGX,WAAW,EAAE,CAE9BD,SAAS,CAAC,UAAM,CACd,GAAMa,WAAU,4FAAG,4JACXC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAGC,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAACF,KAAK,CAAG,IAAI,IAC7FA,KAAK,yBACRL,YAAY,CAAC,KAAK,CAAC,CACnBE,QAAQ,CAAC,2BAA2B,CAAC,+EAIdQ,MAAK,CAAC,mBAAmB,CAAE,CAChDC,OAAO,CAAE,CAAE,eAAe,kBAAYN,KAAK,CAAG,CAChD,CAAC,CAAC,QAFIO,QAAQ,sCAGKA,SAAQ,CAACC,IAAI,EAAE,SAA5BA,IAAI,eAEV,GAAI,CAACD,QAAQ,CAACE,EAAE,CAAE,CAChBd,YAAY,CAAC,KAAK,CAAC,CACnBE,QAAQ,CAACW,IAAI,CAACZ,KAAK,CAAC,CACtB,CAAC,IAAM,CACLH,UAAU,CAACe,IAAI,CAAC,CAChBb,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,iFAEDA,YAAY,CAAC,KAAK,CAAC,CACnBE,QAAQ,CAAC,YAAEa,OAAO,CAAC,qEAEtB,kBAxBKX,WAAU,0CAwBf,CACDA,UAAU,EAAE,CACd,CAAC,CAAE,EAAE,CAAC,CAEN,GAAMY,kBAAiB,CAAG,QAApBA,kBAAiB,EAAS,CAC9Bb,QAAQ,CAAC,UAAU,CAAC,CACtB,CAAC,CAED,mBACE,aAAK,SAAS,CAAC,qBAAqB,WACjCJ,SAAS,eAAI,mBAAG,YAAU,EAAI,CAC9BE,KAAK,eAAI,mBAAIA,KAAK,EAAK,CACvB,CAACF,SAAS,EAAI,CAACE,KAAK,eACnB,oCACE,aAAK,SAAS,CAAC,mBAAmB,wBAChC,aAAK,SAAS,CAAC,gBAAgB,wBAC7B,YAAK,GAAG,CAAER,YAAa,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,gBAAgB,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,EAAG,cAGrF,WAAG,SAAS,CAAC,gBAAgB,WAAEI,OAAO,CAACoB,SAAS,CAAC,GAAC,CAACpB,OAAO,CAACqB,QAAQ,GAAK,cACxE,UAAG,SAAS,CAAC,gBAAgB,0BAAErB,OAAO,CAACsB,KAAK,yCAAb,eAAeC,IAAI,CAAC,IAAI,CAAC,EAAK,GACzD,cACN,aAAK,SAAS,CAAC,iBAAiB,wBAC9B,WAAG,SAAS,CAAC,gBAAgB,wBAC3B,aAAM,SAAS,CAAC,sBAAsB,UAAC,YAAU,EAAO,cACxD,cAAM,SAAS,CAAC,sBAAsB,WAAEvB,OAAO,CAACoB,SAAS,EAAI,EAAE,CAAC,GAAC,CAACpB,OAAO,CAACqB,QAAQ,EAAI,EAAE,GAAQ,GAC9F,cACJ,WAAG,SAAS,CAAC,gBAAgB,wBAC3B,aAAM,SAAS,CAAC,sBAAsB,UAAC,QAAM,EAAO,cACpD,aAAM,SAAS,CAAC,sBAAsB,UAAErB,OAAO,CAACwB,KAAK,EAAQ,GAC3D,cACJ,WAAG,SAAS,CAAC,gBAAgB,wBAC3B,aAAM,SAAS,CAAC,sBAAsB,UAAC,OAAK,EAAO,cACnD,aAAM,SAAS,CAAC,sBAAsB,UAAExB,OAAO,CAACyB,IAAI,CAAGzB,OAAO,CAACyB,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,EAAE,CAAG3B,OAAO,CAACyB,IAAI,CAACG,KAAK,CAAC,CAAC,CAAC,CAACC,WAAW,EAAE,CAAG,EAAE,EAAQ,GAC5I,cACJ,WAAG,SAAS,CAAC,gBAAgB,wBAC3B,aAAM,SAAS,CAAC,sBAAsB,UAAC,YAAU,EAAO,cACxD,aAAM,SAAS,CAAC,sBAAsB,UAAE7B,OAAO,CAAC8B,SAAS,CAAG9B,OAAO,CAAC8B,SAAS,CAACP,IAAI,CAAC,IAAI,CAAC,CAAG,EAAE,EAAQ,GACnG,cACJ,WAAG,SAAS,CAAC,gBAAgB,wBAC3B,aAAM,SAAS,CAAC,sBAAsB,UAAC,SAAO,EAAO,cACrD,aAAM,SAAS,CAAC,sBAAsB,UAAEvB,OAAO,CAAC+B,UAAU,EAAQ,GAChE,GACA,GACF,cACN,YAAK,SAAS,CAAC,iCAAiC,uBAC9C,eAAQ,SAAS,CAAC,uBAAuB,CAAC,OAAO,CAAEZ,iBAAkB,UAAC,cAAY,EAAS,EACvF,GAET,GACG,CAEV,CAAC,CAED,cAAepB,QAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}