{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useEffect}from'react';import{useProjectsContext}from\"../hooks/useProjectsContext\";import{useAuthContext}from\"../hooks/useAuthContext\";import React from'react';// components\nimport ProjectDetails from'../components/ProjectDetails';import ProjectForm from'../components/ProjectForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(){var _useProjectsContext=useProjectsContext(),projects=_useProjectsContext.projects,dispatch=_useProjectsContext.dispatch;var _useAuthContext=useAuthContext(),user=_useAuthContext.user;useEffect(function(){var fetchProjects=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('/api/projects/cp',{headers:{'Authorization':\"Bearer \".concat(user.token)}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:json=_context.sent;if(response.ok){dispatch({type:'SET_PROJECTS',payload:json});}case 7:case\"end\":return _context.stop();}},_callee);}));return function fetchProjects(){return _ref.apply(this,arguments);};}();if(user){fetchProjects();}},[dispatch,user]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"home\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"projects\",children:projects&&projects.map(function(project){return/*#__PURE__*/_jsx(ProjectDetails,{project:project},project._id);})}),/*#__PURE__*/_jsx(ProjectForm,{})]})});};export default Home;","map":{"version":3,"names":["useEffect","useProjectsContext","useAuthContext","React","ProjectDetails","ProjectForm","Home","projects","dispatch","user","fetchProjects","fetch","headers","token","response","json","ok","type","payload","map","project","_id"],"sources":["/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/src/pages/Home.js"],"sourcesContent":["import { useEffect }from 'react'\nimport { useProjectsContext } from \"../hooks/useProjectsContext\"\nimport { useAuthContext } from \"../hooks/useAuthContext\"\nimport React from 'react'\n// components\nimport ProjectDetails from '../components/ProjectDetails'\nimport ProjectForm from '../components/ProjectForm'\n\nconst Home = () => {\n  const {projects, dispatch} = useProjectsContext()\n  const {user} = useAuthContext()\n  \n  useEffect(() => {\n    const fetchProjects = async () => {\n      const response = await fetch('/api/projects/cp', {\n        headers: {'Authorization': `Bearer ${user.token}`},\n      })\n      const json = await response.json()\n\n      if (response.ok) {\n        dispatch({type: 'SET_PROJECTS', payload: json})\n      }\n    }\n\n    if (user) {\n      fetchProjects()\n    }\n  }, [dispatch, user])\n\n\n  return (\n  <div>\n    <div className=\"home\">\n      <div className=\"projects\">\n        {projects && projects.map((project) => (\n          <ProjectDetails key={project._id} project={project} />\n        ))}\n      </div>\n      <ProjectForm />\n    </div>\n    </div>\n  )\n}\n\nexport default Home"],"mappings":"sTAAA,OAASA,SAAS,KAAO,OAAO,CAChC,OAASC,kBAAkB,KAAQ,6BAA6B,CAChE,OAASC,cAAc,KAAQ,yBAAyB,CACxD,MAAOC,MAAK,KAAM,OAAO,CACzB;AACA,MAAOC,eAAc,KAAM,8BAA8B,CACzD,MAAOC,YAAW,KAAM,2BAA2B,yFAEnD,GAAMC,KAAI,CAAG,QAAPA,KAAI,EAAS,CACjB,wBAA6BL,kBAAkB,EAAE,CAA1CM,QAAQ,qBAARA,QAAQ,CAAEC,QAAQ,qBAARA,QAAQ,CACzB,oBAAeN,cAAc,EAAE,CAAxBO,IAAI,iBAAJA,IAAI,CAEXT,SAAS,CAAC,UAAM,CACd,GAAMU,cAAa,4FAAG,4KACGC,MAAK,CAAC,kBAAkB,CAAE,CAC/CC,OAAO,CAAE,CAAC,eAAe,kBAAYH,IAAI,CAACI,KAAK,CAAE,CACnD,CAAC,CAAC,QAFIC,QAAQ,qCAGKA,SAAQ,CAACC,IAAI,EAAE,QAA5BA,IAAI,eAEV,GAAID,QAAQ,CAACE,EAAE,CAAE,CACfR,QAAQ,CAAC,CAACS,IAAI,CAAE,cAAc,CAAEC,OAAO,CAAEH,IAAI,CAAC,CAAC,CACjD,CAAC,qDACF,kBATKL,cAAa,0CASlB,CAED,GAAID,IAAI,CAAE,CACRC,aAAa,EAAE,CACjB,CACF,CAAC,CAAE,CAACF,QAAQ,CAAEC,IAAI,CAAC,CAAC,CAGpB,mBACA,kCACE,aAAK,SAAS,CAAC,MAAM,wBACnB,YAAK,SAAS,CAAC,UAAU,UACtBF,QAAQ,EAAIA,QAAQ,CAACY,GAAG,CAAC,SAACC,OAAO,qBAChC,KAAC,cAAc,EAAmB,OAAO,CAAEA,OAAQ,EAA9BA,OAAO,CAACC,GAAG,CAAsB,EACvD,CAAC,EACE,cACN,KAAC,WAAW,IAAG,GACX,EACA,CAEV,CAAC,CAED,cAAef,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}