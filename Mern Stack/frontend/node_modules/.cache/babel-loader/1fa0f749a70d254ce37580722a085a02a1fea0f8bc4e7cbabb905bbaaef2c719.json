{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { useAuthContext } from './useAuthContext';\nexport const useDelete = () => {\n  _s();\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(null);\n  const {\n    user,\n    dispatch\n  } = useAuthContext();\n  const deleteUser = async email => {\n    setIsLoading(true);\n    setError(null);\n    const response = await fetch(`/api/user/${email}`, {\n      method: 'DELETE',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${user.token}`\n      }\n    });\n    const json = await response.json();\n    if (!response.ok) {\n      setIsLoading(false);\n      setError(json.message);\n    }\n    if (response.ok) {\n      // remove the user from local storage\n      localStorage.removeItem('user');\n\n      // update the auth context\n      dispatch({\n        type: 'LOGOUT'\n      });\n\n      // update loading state\n      setIsLoading(false);\n    }\n  };\n  return {\n    deleteUser,\n    isLoading,\n    error\n  };\n};\n_s(useDelete, \"1vag4scsVbeE3iI2JWHM6FfNP1k=\", false, function () {\n  return [useAuthContext];\n});","map":{"version":3,"names":["useState","useAuthContext","useDelete","error","setError","isLoading","setIsLoading","user","dispatch","deleteUser","email","response","fetch","method","headers","Authorization","token","json","ok","message","localStorage","removeItem","type"],"sources":["/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/src/hooks/useDelete.js"],"sourcesContent":["import { useState } from 'react';\nimport { useAuthContext } from './useAuthContext';\n\nexport const useDelete = () => {\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(null);\n  const { user, dispatch } = useAuthContext();\n\n  const deleteUser = async (email) => {\n    setIsLoading(true);\n    setError(null);\n\n    const response = await fetch(`/api/user/${email}`, {\n      method: 'DELETE',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${user.token}`,\n      },\n    });\n    const json = await response.json();\n\n    if (!response.ok) {\n      setIsLoading(false);\n      setError(json.message);\n    }\n    if (response.ok) {\n      // remove the user from local storage\n      localStorage.removeItem('user');\n\n      // update the auth context\n      dispatch({type: 'LOGOUT'});\n\n      // update loading state\n      setIsLoading(false);\n    }\n  }\n\n  return { deleteUser, isLoading, error };\n}\n"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,cAAc,QAAQ,kBAAkB;AAEjD,OAAO,MAAMC,SAAS,GAAG,MAAM;EAAA;EAC7B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGJ,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACK,SAAS,EAAEC,YAAY,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM;IAAEO,IAAI;IAAEC;EAAS,CAAC,GAAGP,cAAc,EAAE;EAE3C,MAAMQ,UAAU,GAAG,MAAOC,KAAK,IAAK;IAClCJ,YAAY,CAAC,IAAI,CAAC;IAClBF,QAAQ,CAAC,IAAI,CAAC;IAEd,MAAMO,QAAQ,GAAG,MAAMC,KAAK,CAAE,aAAYF,KAAM,EAAC,EAAE;MACjDG,MAAM,EAAE,QAAQ;MAChBC,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClCC,aAAa,EAAG,UAASR,IAAI,CAACS,KAAM;MACtC;IACF,CAAC,CAAC;IACF,MAAMC,IAAI,GAAG,MAAMN,QAAQ,CAACM,IAAI,EAAE;IAElC,IAAI,CAACN,QAAQ,CAACO,EAAE,EAAE;MAChBZ,YAAY,CAAC,KAAK,CAAC;MACnBF,QAAQ,CAACa,IAAI,CAACE,OAAO,CAAC;IACxB;IACA,IAAIR,QAAQ,CAACO,EAAE,EAAE;MACf;MACAE,YAAY,CAACC,UAAU,CAAC,MAAM,CAAC;;MAE/B;MACAb,QAAQ,CAAC;QAACc,IAAI,EAAE;MAAQ,CAAC,CAAC;;MAE1B;MACAhB,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,OAAO;IAAEG,UAAU;IAAEJ,SAAS;IAAEF;EAAM,CAAC;AACzC,CAAC;AAAA,GAnCYD,SAAS;EAAA,QAGOD,cAAc;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}