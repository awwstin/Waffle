{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{useProjectsContext}from\"../hooks/useProjectsContext\";import{useAuthContext}from'../hooks/useAuthContext';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ProjectForm=function ProjectForm(){var _useProjectsContext=useProjectsContext(),dispatch=_useProjectsContext.dispatch;var _useAuthContext=useAuthContext(),user=_useAuthContext.user;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),nums=_useState6[0],setNums=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),emptyFields=_useState10[0],setEmptyFields=_useState10[1];var _useState11=useState(new Set()),_useState12=_slicedToArray(_useState11,2),selectedTags=_useState12[0],setSelectedTags=_useState12[1];var availableTags={languages:['Python','C++','Java','JavaScript','C','HTML/CSS','PHP','SQL','Swift','Go','Kotlin'],projectType:['Front-end','Back-end','Full-stack','React','Flask',\"Rest\",'Machine Learning','Data Analysis','Smart Devices','Artificial Intelligence','Social Network','Visualization'],courseNumber:['CS1101','CS2201','CS2212','CS3250','CS3251','CS3281','CS3270','CS4278','CS3265','CS4260','CS4288','CS3891'],More:['Others']};var renderTagSubList=function renderTagSubList(category){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"label\",{children:[category,\":\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"proj-tag-container\",children:availableTags[category].map(function(tag){return/*#__PURE__*/_jsxs(\"div\",{className:\"proj-tag-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"tag-\".concat(tag),className:\"proj-tag-checkbox\",checked:selectedTags.has(tag),onChange:function onChange(){return handleTagChange(tag);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"tag-\".concat(tag),className:\"proj-tag-label\",children:tag})]},tag);})})]});};var handleTagChange=function handleTagChange(tag){var newSelectedTags=new Set(selectedTags);if(newSelectedTags.has(tag)){newSelectedTags.delete(tag);}else{newSelectedTags.add(tag);}setSelectedTags(newSelectedTags);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var project,response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();if(user){_context.next=4;break;}setError('You must be logged in');return _context.abrupt(\"return\");case 4:project={title:title,description:description,tags:Array.from(selectedTags),nums:nums};_context.next=7;return fetch('/api/projects/',{method:'POST',body:JSON.stringify(project),headers:{'Authorization':\"Bearer \".concat(user.token),'Content-Type':'application/json'}});case 7:response=_context.sent;_context.next=10;return response.json();case 10:json=_context.sent;if(!response.ok){setError(json.error);setEmptyFields(json.emptyFields);}if(response.ok){setTitle('');setDescription('');setNums('');setError(null);setEmptyFields([]);dispatch({type:'CREATE_PROJECT',payload:json});}case 13:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{className:\"create\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add a New Project\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Project Title:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return setTitle(e.target.value);},value:title,className:emptyFields.includes('title')?'error':''}),/*#__PURE__*/_jsx(\"label\",{children:\"Description:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return setDescription(e.target.value);},value:description,className:emptyFields.includes('description')?'error':''}),/*#__PURE__*/_jsx(\"label\",{children:\"Tags:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"proj-tag-container\",children:[renderTagSubList(\"languages\"),renderTagSubList(\"projectType\"),renderTagSubList(\"courseNumber\"),renderTagSubList(\"More\")]}),/*#__PURE__*/_jsx(\"label\",{children:\"Required members:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:function onChange(e){return setNums(e.target.value);},value:nums,className:emptyFields.includes('nums')?'error':''}),/*#__PURE__*/_jsx(\"button\",{children:\"Add Project\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error})]});};export default ProjectForm;","map":{"version":3,"names":["useEffect","useState","useProjectsContext","useAuthContext","ProjectForm","dispatch","user","title","setTitle","description","setDescription","nums","setNums","error","setError","emptyFields","setEmptyFields","Set","selectedTags","setSelectedTags","availableTags","languages","projectType","courseNumber","More","renderTagSubList","category","map","tag","has","handleTagChange","newSelectedTags","delete","add","handleSubmit","e","preventDefault","project","tags","Array","from","fetch","method","body","JSON","stringify","headers","token","response","json","ok","type","payload","target","value","includes"],"sources":["/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/src/components/ProjectForm.js"],"sourcesContent":["import { useEffect, useState } from \"react\"\nimport { useProjectsContext } from \"../hooks/useProjectsContext\"\nimport { useAuthContext } from '../hooks/useAuthContext'\n\nconst ProjectForm = () => {\n  const { dispatch } = useProjectsContext()\n  const { user } = useAuthContext()\n\n  const [title, setTitle] = useState('')\n  const [description, setDescription] = useState('')\n  const [nums, setNums] = useState('')\n  const [error, setError] = useState(null)\n  const [emptyFields, setEmptyFields] = useState([])\n  const [selectedTags, setSelectedTags] = useState(new Set())\n\n\n  const availableTags = {\n    languages: ['Python', 'C++', 'Java', 'JavaScript', 'C', 'HTML/CSS', 'PHP', 'SQL', 'Swift', 'Go', 'Kotlin'],\n    projectType: [\n      'Front-end',\n      'Back-end',\n      'Full-stack',\n      'React',\n      'Flask',\n      \"Rest\",\n      'Machine Learning',\n      'Data Analysis',\n      'Smart Devices',\n      'Artificial Intelligence',\n      'Social Network',\n      'Visualization',\n    ],\n    courseNumber: ['CS1101', 'CS2201', 'CS2212', 'CS3250', 'CS3251', 'CS3281', 'CS3270','CS4278', 'CS3265', 'CS4260', 'CS4288','CS3891'],\n    More: ['Others'],\n  };\n\n  const renderTagSubList = (category) => (\n    <>\n      <label>{category}:</label>\n      <div className=\"proj-tag-container\">\n        {availableTags[category].map((tag) => (\n          <div key={tag} className=\"proj-tag-option\">\n            <input\n              type=\"checkbox\"\n              id={`tag-${tag}`}\n              className=\"proj-tag-checkbox\"\n              checked={selectedTags.has(tag)}\n              onChange={() => handleTagChange(tag)}\n            />\n            <label htmlFor={`tag-${tag}`} className=\"proj-tag-label\">\n              {tag}\n            </label>\n          </div>\n        ))}\n      </div>\n    </>\n  );\n\n  const handleTagChange = (tag) => {\n    const newSelectedTags = new Set(selectedTags)\n    if (newSelectedTags.has(tag)) {\n      newSelectedTags.delete(tag)\n    } else {\n      newSelectedTags.add(tag)\n    }\n    setSelectedTags(newSelectedTags)\n  }\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n\n    if (!user) {\n      setError('You must be logged in')\n      return\n    } \n  \n    const project = {title, description, tags: Array.from(selectedTags), nums}\n\n    const response = await fetch('/api/projects/', {\n      method: 'POST',\n      body: JSON.stringify(project),\n      headers: {\n        'Authorization': `Bearer ${user.token}`,\n        'Content-Type': 'application/json'\n      }\n    })\n    const json = await response.json()\n\n    if (!response.ok) {\n      setError(json.error)\n      setEmptyFields(json.emptyFields)\n    }\n    if (response.ok) {\n      setTitle('')\n      setDescription('')\n      setNums('')\n      setError(null)\n      setEmptyFields([])\n      \n      dispatch({type: 'CREATE_PROJECT', payload: json})\n    }\n  }\n\n  return (\n    <form className=\"create\" onSubmit={handleSubmit}>\n      <h3>Add a New Project</h3>\n\n      <label>Project Title:</label>\n      <input \n        type=\"text\"\n        onChange={(e) => setTitle(e.target.value)}\n        value={title}\n        className={emptyFields.includes('title') ? 'error' : ''}\n      />\n\n      <label>Description:</label>\n      <input \n        type=\"text\"\n        onChange={(e) => setDescription(e.target.value)}\n        value={description}\n        className={emptyFields.includes('description') ? 'error' : ''}\n      />\n\n      <label>Tags:</label>\n      <div className=\"proj-tag-container\">\n      {renderTagSubList(\"languages\")}\n      {renderTagSubList(\"projectType\")}\n      {renderTagSubList(\"courseNumber\")}\n      {renderTagSubList(\"More\")}\n    </div>\n\n      <label>Required members:</label>\n      <input \n        type=\"number\"\n        onChange={(e) => setNums(e.target.value)}\n        value={nums}\n        className={emptyFields.includes('nums') ? 'error' : ''}\n      />\n\n      <button>Add Project</button>\n      {error && <div className=\"error\">{error}</div>}\n    </form>\n  )\n}\n\nexport default ProjectForm"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}