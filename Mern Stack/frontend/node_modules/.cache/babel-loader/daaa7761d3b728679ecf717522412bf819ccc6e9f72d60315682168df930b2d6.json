{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useNavigate,useParams,NavLink}from'react-router-dom';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import Box from'@mui/material/Box';import validator from'validator';import'./PasswordReset.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ForgotPassword=function ForgotPassword(){var _useParams=useParams(),email=_useParams.email,token=_useParams.token;var history=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),data2=_useState2[0],setData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var userValid=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/user/forgotpassword/\".concat(email,\"/\").concat(token),{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}});case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;if(data.status===201){console.log(\"user valid\");}else{console.log(\"user invalid\");history(\"*\");}case 7:case\"end\":return _context.stop();}},_callee);}));return function userValid(){return _ref.apply(this,arguments);};}();var setval=function setval(e){setPassword(e.target.value);};var sendpassword=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var res,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.preventDefault();if(!(password===\"\")){_context2.next=5;break;}toast.error(\"password is required!\",{position:\"top-center\"});_context2.next=16;break;case 5:if(validator.isStrongPassword(password)){_context2.next=9;break;}toast.error('Password not strong enough. Password must contain a combination of uppercase letters, lowercase letters, numbers, and symbols.');_context2.next=16;break;case 9:_context2.next=11;return fetch(\"/api/user/\".concat(email,\"/\").concat(token),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({password:password})});case 11:res=_context2.sent;_context2.next=14;return res.json();case 14:data=_context2.sent;if(data.status===201){setPassword(\"\");setMessage(true);}else{toast.error(\"Token Expired\",{position:\"top-center\"});}case 16:case\"end\":return _context2.stop();}},_callee2);}));return function sendpassword(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){userValid();setTimeout(function(){setData(true);},2000);},[]);return/*#__PURE__*/_jsx(_Fragment,{children:data2?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"form_data\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form_heading\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Enter Your NEW Password\"})}),/*#__PURE__*/_jsxs(\"form\",{children:[message?/*#__PURE__*/_jsx(\"p\",{style:{color:\"green\",fontWeight:\"bold\"},children:\"Password Successfully Updated \"}):\"\",/*#__PURE__*/_jsxs(\"div\",{className:\"form_input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"New password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:setval,name:\"password\",id:\"password\",placeholder:\"Enter Your new password\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:sendpassword,children:\"Change password\"})]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(NavLink,{to:\"/login\",children:\"Back to Login\"})}),/*#__PURE__*/_jsx(ToastContainer,{})]})})}):/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:\"center\",alignItems:\"center\",height:\"100vh\"},children:\"Loading... \\xA0\"})});};export default ForgotPassword;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useParams","NavLink","ToastContainer","toast","Box","validator","ForgotPassword","email","token","history","data2","setData","password","setPassword","message","setMessage","userValid","fetch","method","headers","res","json","data","status","console","log","setval","e","target","value","sendpassword","preventDefault","error","position","isStrongPassword","body","JSON","stringify","setTimeout","color","fontWeight","display","justifyContent","alignItems","height"],"sources":["/Users/jiashunli/Desktop/legendary-waffle/Mern Stack/frontend/src/components/ForgotPassword.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useNavigate, useParams, NavLink } from 'react-router-dom';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Box from '@mui/material/Box';\nimport validator from 'validator'\nimport './PasswordReset.css'\n\nconst ForgotPassword = () => {\n\n    const { email, token } = useParams();\n\n    const history = useNavigate();\n\n    const [data2, setData] = useState(false);\n\n    const [password, setPassword] = useState(\"\");\n\n    const [message, setMessage] = useState(\"\");\n\n    const userValid = async () => {\n        const res = await fetch(`/api/user/forgotpassword/${email}/${token}`, {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n\n        const data = await res.json()\n\n        if (data.status === 201) {\n            console.log(\"user valid\")\n        } else {\n            console.log(\"user invalid\")\n            history(\"*\")\n        }\n    }\n\n\n    const setval = (e) => {\n        setPassword(e.target.value)\n    }\n\n    const sendpassword = async (e) => {\n        e.preventDefault();\n\n\n        if (password === \"\") {\n            toast.error(\"password is required!\", {\n                position: \"top-center\"\n            });\n        } else if (!validator.isStrongPassword(password)) {\n            toast.error('Password not strong enough. Password must contain a combination of uppercase letters, lowercase letters, numbers, and symbols.')\n        } else {\n            const res = await fetch(`/api/user/${email}/${token}`, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({ password })\n            });\n\n            const data = await res.json()\n\n            if (data.status === 201) {\n                setPassword(\"\")\n                setMessage(true)\n            } else {\n                toast.error(\"Token Expired\",{\n                    position: \"top-center\"\n                })\n            }\n        }\n    }\n\n    useEffect(() => {\n        userValid()\n        setTimeout(() => {\n            setData(true)\n        }, 2000)\n    }, [])\n\n    return (\n        <>\n            {\n                data2 ? (\n                    <>\n                        <section>\n                            <div className=\"form_data\">\n                                <div className=\"form_heading\">\n                                    <h1>Enter Your NEW Password</h1>\n                                </div>\n\n                                <form>\n                                    {message ? <p style={{ color: \"green\", fontWeight: \"bold\" }}>Password Successfully Updated </p> : \"\"}\n                                    <div className=\"form_input\">\n                                        <label htmlFor=\"password\">New password</label>\n                                        <input type=\"password\" value={password} onChange={setval} name=\"password\" id=\"password\" placeholder='Enter Your new password' />\n                                    </div>\n\n                                    <button className='btn' onClick={sendpassword}>Change password</button>\n                                </form>\n                                <p><NavLink to=\"/login\">Back to Login</NavLink></p>\n                                <ToastContainer />\n                            </div>\n                        </section>\n                    </>\n                ) : <Box sx={{ display: 'flex', justifyContent: \"center\", alignItems: \"center\", height: \"100vh\" }}>\n                    Loading... &nbsp;\n                </Box>\n            }\n        </>\n    )\n}\n\nexport default ForgotPassword"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}